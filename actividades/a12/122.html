<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Simulación de Cohete Rosa</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        font-family: Arial, sans-serif;
        background: #e2ba1a;
    }

    h1 {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 28px;
        font-family: "Courier New", Courier, monospace;
        color: #ff4fb3;
        text-shadow: 0 0 5px white;
        z-index: 10;
    }

    #instrucciones {
        position: absolute;
        bottom: 15px;
        left: 15px;
        background: rgba(255, 240, 200, 0.7);
        padding: 12px 16px;
        border-radius: 12px;
        font-size: 16px;
        font-family: "Courier New", Courier, monospace;
        color: #b3006b;
        width: 260px;
        line-height: 1.4;
        box-shadow: 0 0 10px rgba(255, 200, 200, 0.5);
        z-index: 10;
    }

    canvas {
        display: block;
    }
</style>
</head>
<body>

<h1>Simulación de Nave con Fricción y Límites</h1>

<div id="instrucciones">
    <b>Controles:</b><br>
    ⬆ Acelerar<br>
    ⬅ Girar a la izquierda<br>
    ➡ Girar a la derecha<br>
    <br>
    La nave tiene fricción y rebota en los bordes.<br>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener("resize", () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

// ---------------------------
// ROCKET DATA
// ---------------------------
let rocket = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    angle: 0,
    speedX: 0,
    speedY: 0,
    thrusting: false,
    radius: 30
};

let keys = {};

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

// ---------------------------
// BACKGROUND: SKY + CLOUDS
// ---------------------------
function drawBackground() {
    ctx.fillStyle = "#ffeb7a";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    drawCloud(200, 150, 60);
    drawCloud(600, 250, 70);
    drawCloud(1000, 120, 55);
    drawCloud(400, 380, 80);
}

function drawCloud(x, y, size) {
    ctx.fillStyle = "rgba(255,255,255,0.9)";
    ctx.beginPath();
    ctx.ellipse(x, y, size, size * 0.6, 0, 0, Math.PI * 2);
    ctx.ellipse(x + size * 0.6, y + 10, size * 0.7, size * 0.5, 0, 0, Math.PI * 2);
    ctx.ellipse(x - size * 0.6, y + 10, size * 0.7, size * 0.5, 0, 0, Math.PI * 2);
    ctx.fill();
}

// ---------------------------
// DRAW ROCKET
// ---------------------------
function drawRocket(ctx, rocket) {
    ctx.save();
    ctx.translate(rocket.x, rocket.y);
    ctx.rotate(rocket.angle);

    // Cuerpo
    ctx.fillStyle = "#ff7ecb";
    ctx.beginPath();
    ctx.ellipse(0, 0, 18, 28, 0, 0, Math.PI * 2);
    ctx.fill();

    // Punta
    ctx.fillStyle = "#ff4fb3";
    ctx.beginPath();
    ctx.moveTo(0, -35);
    ctx.lineTo(-12, -10);
    ctx.lineTo(12, -10);
    ctx.closePath();
    ctx.fill();

    // Aletas
    ctx.fillStyle = "#ff4fb3";

    ctx.beginPath();
    ctx.moveTo(-18, 10);
    ctx.lineTo(-30, 25);
    ctx.lineTo(-10, 20);
    ctx.closePath();
    ctx.fill();

    ctx.beginPath();
    ctx.moveTo(18, 10);
    ctx.lineTo(30, 25);
    ctx.lineTo(10, 20);
    ctx.closePath();
    ctx.fill();

    // Fuego
    if (rocket.thrusting) {
        ctx.fillStyle = "#ffd4f0";
        ctx.beginPath();
        ctx.moveTo(0, 32);
        ctx.lineTo(-8, 50);
        ctx.lineTo(8, 50);
        ctx.closePath();
        ctx.fill();
    }

    ctx.restore();
}

// ---------------------------
// UPDATE LOOP
// ---------------------------
function update() {

    // ROTACIÓN
    if (keys["ArrowLeft"]) rocket.angle -= 0.08;
    if (keys["ArrowRight"]) rocket.angle += 0.08;

    // EMPUJE
    if (keys["ArrowUp"]) {
        rocket.thrusting = true;
        rocket.speedX += Math.cos(rocket.angle) * 0.2;
        rocket.speedY += Math.sin(rocket.angle) * 0.2;
    } else {
        rocket.thrusting = false;
    }

    // FRICCIÓN
    rocket.speedX *= 0.98;
    rocket.speedY *= 0.98;

    // MOVER
    rocket.x += rocket.speedX;
    rocket.y += rocket.speedY;

    // LÍMITES
    let r = rocket.radius;

    if (rocket.x < r) { rocket.x = r; rocket.speedX *= -0.6; }
    if (rocket.x > canvas.width - r) { rocket.x = canvas.width - r; rocket.speedX *= -0.6; }
    if (rocket.y < r) { rocket.y = r; rocket.speedY *= -0.6; }
    if (rocket.y > canvas.height - r) { rocket.y = canvas.height - r; rocket.speedY *= -0.6; }

    // DIBUJAR
    drawBackground();
    drawRocket(ctx, rocket);

    requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
